<!--
  @File Name          : OfferWithCmp.cmp
  @Description        : 
  @Author             : eayalcor@everis.com
  @Group              : 
  @Last Modified By   : eayalcor@everis.com
  @Last Modified On   : 6/12/2020, 12:42:41 PM
  @Modification Log   : 
  Ver       Date            Author      		    Modification
  1.0    6/1/2020   eayalcor@everis.com     Initial Version
-->
<aura:component implements="force:hasRecordId,force:lightningQuickActionWithoutHeader" 
access="global" controller='OfferCmpController'>
  <aura:attribute name="title" type="String"  default="Generar Oportunidad"/>
  <aura:attribute name="loading" type="Boolean" default="true" />
  <aura:attribute name="confirm" type="Boolean" default="false" />
  <aura:attribute name="offer" type="Oferta__c" />
  <aura:attribute name="textMessage" type="String" default="EstÃ¡ por generar una oportunidad a la oferta seleccionada, presione confirmar para Generar." />
  <aura:attribute name="buttonControl" type="Boolean" default="false" />
  <aura:attribute name="showComment" type="Boolean" default="true" />
  <aura:attribute name="obsOffer" type="String" default="" />

  <aura:html tag="style">
    .cuf-content {
    padding: 0 0rem !important;
    }
    .slds-p-around--medium {
    padding: 0rem !important;
    }       
    .slds-modal__content{
    overflow-y:hidden !important;
    height:unset !important;
    max-height:unset !important;
    }
  </aura:html>
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />

  <div class="modal-header slds-modal__header">
    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">{!v.title}</h2>
  </div>

  <div class="slds-modal__content slds-p-around_x-large slds-is-relative minHeight" id="modal-content">
    <aura:if isTrue="{!v.loading}">
        <div class="exampleHolder">
            <lightning:spinner alternativeText="Loading" size="large" />
        </div>
        <aura:set attribute="else">
            {!v.textMessage} 
            <aura:if isTrue="{!v.showComment}">
              <div class="slds-form-element">
                <div class="slds-form-element__control">
                  <lightning:textarea name="input2" label="Comentarios Oferta: " value="{!v.obsOffer}" maxlength = "255"/>
                  <div class="slds-form-element__help">(Campo Opcional)</div>
                </div>
              </div>
            </aura:if>
        </aura:set>
    </aura:if>
  </div>
  <aura:if isTrue="{!v.confirm}">
    
  </aura:if>
  <div class="modal-footer slds-modal__footer">
    
    <aura:if isTrue="{!v.buttonControl}">
        <lightning:button  variant="brand" label="Confirmar" title="Brand action" onclick="{!c.generate}" />
        <lightning:button variant="Neutral" label="Cancelar" title="Base action" onclick="{!c.closeModal }"/>
    </aura:if>
    <aura:if isTrue="{!!v.buttonControl}">
        <lightning:button variant="Neutral" label="Cerrar" title="Base action" onclick="{! c.closeModal }"/>
    </aura:if>
  </div>
</aura:component>